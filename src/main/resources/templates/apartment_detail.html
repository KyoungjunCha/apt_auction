<html layout:decorate="~{layout}">
<div layout:fragment="content" class="container apartment-detail">
  <!-- background video yes or no -->
  <!-- center -->
  <div class="m-auto content-box">

    <!-- 기본정보 -->
    <div class="info" id="print_list1">

      <!-- //관련물건정보 -->
      <div class="top styled-table2" style="font-weight:bold; text-align:left">
        <h3>사건번호 : &nbsp;<span class="case" id="auctionno" th:text="${auctionMaster.auctionKey}"></span></h3>
        <p class="txt" style="font-weight:bold; text-align:right">고양지원 경매6계(031-920-6316) 매각기일 2020-12-23(10:00)</p>
      </div>

      <table class="styled-table2">
        <colgroup>
          <col width="110">
          <col width="160">
          <col width="110">
          <col width="160">
          <col width="110">
          <col width="160">
        </colgroup>
        <tbody>
          <tr>
            <th>소재지</th>
            <td colspan="5" style="font-weight:bold; text-align:left">
              <span id="addrcopy" th:text="${auctionMaster.address}"></span> &nbsp;
              <button id="myButton1" class="btn_copy" style="border: 2px; cursor:pointer">주소복사</button>
            </td>
          </tr>
          <tr>
            <th>도로명주소</th>
            <td colspan="5" style="font-weight:bold; text-align:left">
              <span id="addrcopy2" th:text="${auctionMaster.roadName}"></span> &nbsp;
              <button id="myButton2" class="btn_copy" style="border: 2px; cursor:pointer">주소복사</button>
            </td>
          </tr>



          <script layout:fragmen="script3" th:inline="javascript">
            document.getElementById("myButton1").onclick = function () {
              var input_text1 = document.getElementById("addrcopy").textContent;
              var textArea1 = document.createElement('textarea');
              document.body.appendChild(textArea1);
              textArea1.value = input_text1;
              textArea1.select();
              document.execCommand('copy');
              document.body.removeChild(textArea1);
              alert("복사가 완료되엇습니다.")
            }
            document.getElementById("myButton2").onclick = function () {
              var input_text2 = document.getElementById("addrcopy2").textContent;
              var textArea2 = document.createElement('textarea');
              document.body.appendChild(textArea2);
              textArea2.value = input_text2;
              textArea2.select();
              document.execCommand('copy');
              document.body.removeChild(textArea2);
              alert("복사가 완료되엇습니다.")
            }
          </script>



          <tr>
            <th>물건종별</th>
            <td>아파트</td>
            <th>감 정 가</th>
            <td th:text="${#numbers.formatInteger(auctionMaster.totalAppraisalPrice, 3, 'COMMA') + ' 원'}"></td>
            <th>감정일자</th>
            <td th:text="${auctionMaster.appraisalDate}"></td>
          </tr>
          <tr>
            <th>유찰횟수</th>
            <td th:text="${auctionMaster.auctionMiscarriageCount}"></td>
            <th>최저매각가</th>
            <td th:text="${#numbers.formatInteger(auctionMaster.minimumSalesPrice, 3, 'COMMA') + ' 원'}"></td>
            <th>최초경매일</th>
            <td th:text="${auctionMaster.firstAuctionDate}"></td>
          </tr>
          <tr>
            <th>아파트평수</th>
            <td th:text="${auctionMaster.apartmentSize + ' 평'}"></td>
            <th>실거래가</th>
            <td th:text="${#numbers.formatInteger(auctionMaster.realPrice, 3, 'COMMA') + ' 원'}"></td>
            <th>최종경매일</th>
            <td th:text="${auctionMaster.finalAuctionDate}"></td>
          </tr>
          <tr>
            <th>총 층 수</th>
            <td th:text="${auctionMaster.totalFloor}"></td>
            <th>낙 찰 가</th>
            <td th:text="${#numbers.formatInteger(auctionMaster.hammerPrice, 3, 'COMMA') + ' 원'}"></td>
            <th>준 공 일</th>
            <td th:text="${auctionMaster.builtDate}"></td>
          </tr>
          <tr>
            <th>현재층수</th>
            <td th:text="${auctionMaster.currentFloor}"></td>
            <th>예측낙찰가</th>
            <td style="font-weight:bold; color: brown;"
              th:text="${#numbers.formatInteger(auctionMaster.predictionPrice, 3, 'COMMA') + ' 원'}"></td>
            <th>인근낙찰율</th>
            <td th:text="${auctionMaster.vicinityRate + ' %'}"></td>
          </tr>
          <tr>
            <th>조회수</th>
            <td th:text="${auctionMaster.viewCount}"></td>
            <th>예상 비용</th>
            <td th:text="${#numbers.formatInteger(1000000, 3, 'COMMA') + ' 원'}">
            </td>
            <td colspan=2>
              <button type="button" class="btn btn-outline-primary" id="popupbtn">예상 비용 산출</button>
              <!-- <button type="button" th:onclick="|location.href='@{/auction/popup(apartmentSize=${auctionMaster.apartmentSize}, price=${auctionMaster.totalAppraisalPrice})}'|">예상 비용 산출</button> -->
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
<script layout:fragment="script4" th:inline="javascript">
  // 팝업창
  // 버튼 엘리먼트 가져오기
  // var popupbtn = document.getElementById("popupbtn");
  var apartmentSize = /*[[${auctionMaster.apartmentSize}]]*/;
  var price = /*[[${auctionMaster.predictionPrice}]]*/;

  function openPopup() {
    // 팝업 창의 URL
    var popupUrl = "/auction/popup?apartmentSize=" + apartmentSize;
    popupUrl += '&price=' + price;
    // console.log(popupUrl);
    var name = "popup";
    // 팝업 창의 속성 (크기, 스크롤바 등)
    var popupOptions = "width=900px,height=800px,scrollbars=yes";

    // 팝업 창 열기
    window.open(popupUrl, name, popupOptions);
  }

  // 이제 버튼 클릭 이벤트를 설정
  var popupbtn = document.getElementById("popupbtn");
  popupbtn.addEventListener("click", function (event) {
    openPopup(); // openpopup 함수 호출
  });


</script>

</html>